# 缺失的官方数据源分析报告

## 一、当前已存在的数据源

### 1. 已注册的数据源（dim_source表）
- **YONGYI** - 涌益咨询（vendor）
- **MYSTEEL/GANGLIAN** - 钢联数据（vendor）
- **DCE** - 大连商品交易所（exchange）

### 2. 已导入的数据文件
- ✅ 涌益咨询周度数据.xlsx
- ✅ 涌益咨询日度数据.xlsx
- ✅ 钢联自动更新模板.xlsx
- ✅ 钢联模板.xlsx
- ✅ DCE期货数据（lh_ftr.xlsx, lh_opt.xlsx）

## 二、E2.多渠道汇总需求中提到的数据源

### 1. 已找到的数据源
- ✅ **涌益咨询** - 数据已存在
  - 月度-能繁母猪存栏（2020年2月新增）
  - 月度-小猪存栏（2020年5月新增）
  - 月度-大猪存栏（2020年5月新增）
  - 月度-猪料销量
  - 月度-淘汰母猪屠宰厂宰杀量

- ✅ **钢联数据** - 数据已存在
  - 钢联模板.xlsx（需要确认是否有"月度数据"和"淘汰母猪屠宰"sheet）

### 2. 缺失的数据源

#### ❌ **协会数据（中国畜牧业协会/中国饲料工业协会）**
- **需求位置**: E2.多渠道汇总 - 能繁母猪饲料环比、仔猪饲料环比、育肥猪饲料环比
- **数据来源**: 【生猪产业数据】- 02.协会猪料
- **需要的列**: I、N、S列
- **数据内容**: 协会猪料统计数据
- **可能来源**:
  - 中国畜牧业协会: http://www.caaa.cn/
  - 中国饲料工业协会: http://www.chinafeed.org.cn/
- **建议**: 
  - 需要确认是否有"生猪产业数据"Excel文件
  - 如果没有，需要从协会官网爬取或申请数据接口

#### ❌ **NYB数据**
- **需求位置**: E2.多渠道汇总 - 能繁母猪存栏环比、新生仔猪存栏环比、生猪存栏环比
- **数据来源**: 【生猪产业数据】- NYB
- **需要的列**: 
  - 能繁母猪: C-F列和G-I列
  - 生猪存栏: 除了T-V列，5月龄来自J列
- **数据内容**: NYB（可能是某个机构或数据库的缩写）统计数据
- **建议**: 
  - 需要确认NYB是什么机构/数据源
  - 需要找到对应的数据文件或数据源

## 三、其他缺失的官方数据源

### 1. ❌ **国家统计局数据（E4. 统计局数据汇总）**
- **需求位置**: E4. 统计局数据汇总
- **数据内容**: 国家统计局官方统计数据
- **可能的数据类型**:
  - 生猪存栏量
  - 能繁母猪存栏量
  - 猪肉产量
  - 生猪出栏量
  - 其他相关统计数据
- **数据来源**: 
  - 国家统计局官网: http://www.stats.gov.cn/
  - 可能的数据页面:
    - 月度统计数据
    - 季度统计数据
    - 年度统计数据
- **更新频率**: 月度/季度
- **建议**: 
  - 需要开发爬虫从统计局官网爬取数据
  - 或者申请官方数据接口
  - 数据格式可能需要ETL处理

### 2. ❌ **农业农村部数据**
- **需求位置**: D4. 结构分析 - 农业部出栏环比
- **数据内容**: 
  - 能繁母猪存栏量（全国、规模场、中小散户）
  - 生猪出栏量（全国、规模场、中小散户）
- **数据来源**: 
  - 农业农村部官网: http://www.moa.gov.cn/
  - 可能的数据页面:
    - 畜牧业统计数据
    - 月度/季度/年度统计报告
- **更新频率**: 月度/季度
- **建议**: 
  - 需要开发爬虫从农业农村部官网爬取数据
  - 或者申请官方数据接口
  - 数据格式可能需要ETL处理

### 3. ❌ **供需曲线数据（E3. 供需曲线）**
- **需求位置**: E3. 供需曲线
- **数据内容**: 供需曲线相关数据
- **数据来源**: 未知（需要确认）
- **建议**: 
  - 需要确认数据来源
  - 可能需要从多个数据源计算得出

### 4. ⚠️ **其他可能的官方数据源**

#### 海关总署数据
- **数据内容**: 猪肉进出口数据
- **数据来源**: http://www.customs.gov.cn/
- **更新频率**: 月度
- **建议**: 如果需要进出口数据，可以从海关总署官网爬取

#### 商务部数据
- **数据内容**: 市场监测数据、价格数据
- **数据来源**: http://www.mofcom.gov.cn/
- **更新频率**: 日度/周度
- **建议**: 如果需要市场监测数据，可以从商务部官网爬取

## 四、数据源优先级建议

### 高优先级（E2.多渠道汇总必需）
1. **协会数据** - 用于饲料环比数据
2. **NYB数据** - 用于存栏环比数据
3. **钢联月度数据** - 需要确认是否有"月度数据"sheet

### 中优先级（功能完整性）
4. **农业农村部数据** - 用于结构分析功能
5. **国家统计局数据** - 用于E4.统计局数据汇总

### 低优先级（可选）
6. **供需曲线数据** - 需要确认数据来源
7. **海关总署数据** - 如果需要进出口数据
8. **商务部数据** - 如果需要市场监测数据

## 五、实施建议

### 1. 数据源获取方式

#### 方式1: 文件导入（优先）
- 如果用户有"生猪产业数据"Excel文件，可以直接导入
- 需要确认文件位置和格式

#### 方式2: 网站爬虫
- 对于公开的官方数据，可以开发爬虫定期爬取
- 需要处理反爬虫机制
- 需要数据清洗和格式化

#### 方式3: API接口
- 如果官方提供API接口，可以直接对接
- 需要申请API密钥或授权

### 2. 技术实现建议

#### 爬虫开发
- 使用Python的requests + BeautifulSoup或Scrapy框架
- 需要处理：
  - 登录认证（如果需要）
  - 反爬虫机制（验证码、IP限制等）
  - 数据解析和清洗
  - 错误处理和重试机制

#### 数据存储
- 使用现有的ingest系统导入数据
- 创建对应的ingest_profile和parser
- 数据存储在raw_table和fact_observation中

#### 定时任务
- 使用celery或APScheduler实现定时爬取
- 设置合理的爬取频率（避免对服务器造成压力）

## 六、下一步行动

1. **确认数据源**
   - [ ] 确认"生猪产业数据"文件是否存在
   - [ ] 确认NYB数据源是什么
   - [ ] 确认钢联模板中是否有"月度数据"sheet

2. **开发爬虫（如果需要）**
   - [ ] 农业农村部数据爬虫
   - [ ] 国家统计局数据爬虫
   - [ ] 协会数据爬虫（如果需要）

3. **数据导入**
   - [ ] 创建对应的ingest_profile
   - [ ] 创建对应的parser
   - [ ] 导入历史数据

4. **功能完善**
   - [ ] 完善E2.多渠道汇总API
   - [ ] 完善D4.结构分析API（添加农业部数据）
   - [ ] 开发E4.统计局数据汇总功能
