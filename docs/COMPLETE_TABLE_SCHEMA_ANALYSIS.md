# 完整表结构分析文档

## 分析目标

对5类Excel文件进行详细分析，为每个sheet（或sheet中的每个逻辑表）定义：
1. 表名
2. 表结构（字段定义）
3. 列映射规则
4. 唯一键定义
5. 索引定义

## 分析原则

1. **一个sheet可能包含多张表**：需要仔细分析sheet结构，识别是否包含多个逻辑表
2. **表结构要清晰**：每个表对应一个明确的业务实体
3. **列映射要准确**：从Excel列到表字段的映射要精确
4. **考虑查询需求**：表结构和索引要考虑实际查询场景

## 文件清单

### 1. 钢联价格模板 (GANGLIAN DAILY)
- **文件**: `1、价格：钢联自动更新模板.xlsx`
- **Sheet数量**: 7个
- **分析状态**: 初步分析完成

#### Sheet列表：
1. 分省区猪价
2. 集团企业出栏价
3. 交割库出栏价
4. 区域价差
5. 肥标价差
6. 毛白价差
7. 养殖利润（周度）

### 2. 涌益周度数据 (YONGYI WEEKLY)
- **文件**: `2026.1.16-2026.1.22涌益咨询 周度数据.xlsx`
- **Sheet数量**: 65个
- **分析状态**: 部分分析（前10个）

### 3. 涌益日度数据 (YONGYI DAILY)
- **文件**: `2026年2月2日涌益咨询日度数据 - 副本.xlsx`
- **Sheet数量**: 8个
- **分析状态**: 初步分析完成

#### Sheet列表：
1. 出栏价
2. 价格+宰量
3. 散户标肥价差
4. 各省份均价
5. 市场主流标猪肥猪价格
6. 屠宰企业日度屠宰量
7. 市场主流标猪肥猪均价方便作图
8. 交割地市出栏价

### 4. DCE期货 (DCE DAILY)
- **文件**: `lh_ftr.xlsx`
- **分析状态**: 待分析

### 5. DCE期权 (DCE DAILY)
- **文件**: `lh_opt.xlsx`
- **分析状态**: 待分析

## 下一步工作

1. **详细分析每个sheet**
   - 打开Excel文件，查看实际结构
   - 识别表头、数据行、日期列、指标列
   - 识别是否包含多个逻辑表

2. **定义表结构**
   - 为每个表定义字段
   - 确定数据类型
   - 定义唯一键和索引

3. **定义列映射**
   - 从Excel列到表字段的映射规则
   - 数据转换规则
   - 值映射规则

4. **生成完整文档**
   - 表结构定义（SQL DDL）
   - 列映射配置（JSON）
   - 实施指南

## 注意事项

1. **表名规范**：`{source_code}_{dataset_type}_{sheet_name_snake_case}`
2. **表名长度**：MySQL表名最长64字符
3. **一个sheet多张表**：需要仔细分析sheet结构
4. **向后兼容**：保持与现有fact_observation的兼容性
