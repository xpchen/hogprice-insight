PRD 目录：生猪研究与套保决策数据平台（暂定）
0. 文档信息

0.1 版本记录（版本号、日期、作者、评审人）

0.2 术语表（标猪/肥猪、标肥价差、毛白价差、基差、CR8、Nowcast 等）

0.3 参考资料（Excel 模板、数据字典、周度套保策略PPT）

1. 背景与目标

1.1 背景现状（Excel 指标库 + 手工周报的痛点）

1.2 业务目标（指标统一、季节性分析、周报工厂、套保决策支持）

1.3 成功指标（节省时间、周报产出效率、数据一致性告警命中率等）

1.4 约束与假设（数据源授权、更新频率、用户数量、部署方式）

2. 用户与使用场景

2.1 用户角色

研究员/分析师

套保/交易人员

管理者（负责人）

系统管理员

只读访客（可选）

2.2 核心场景（User Journey）

S1：日度数据更新与异常检查

S2：季节性分析（单指标多年叠线）

S3：区间复盘（价格+价差/利润双轴）

S4：周报生成（模板 + 自动图表 + 手填观点）

S5：套保建议与复盘台账（建议→执行→结果）

3. 范围界定

3.1 本期必做（MVP）

3.2 本期可选（Nice-to-have）

3.3 明确不做（Out of scope）

3.4 里程碑与交付物清单（环境、接口、文档、导出模板）

4. 数据体系与指标定义（核心）

4.1 数据源清单

农业农村部（规模场、规上屠宰等）

协会（猪料、行业数据）

钢联/涌益（高频价格、屠宰等）

上市公司跟踪（可选）

4.2 数据口径与频率（日/周/月）与时滞说明

4.3 指标字典规范

指标分类（价格/价差/利润/量/库存冻品/结构）

字段：名称、单位、频率、来源、口径说明、维度、默认聚合

指标ID与命名规则

4.4 维度体系

地区（全国/省/区域）

企业/集团

交割库/库点

Tags（猪种、体重段、口径类型等）

4.5 数据质量与版本追溯

批次导入、更新日志、异常值记录

多来源同指标对齐策略（锚定口径 vs 参考口径）

4.6 数据存储模型（概念模型/逻辑模型）

事实表（长表时间序列）

维度表（指标、地区、企业、库点）

模板/报告/台账（可选）

5. 功能需求（模块拆解）
5.1 登录与权限（RBAC）

登录/登出/Token策略

角色与权限矩阵

用户管理（管理员）

审计日志（可选）

5.2 数据导入与更新（Excel/自动）

Excel 导入（多sheet、多指标）

自动更新（定时任务/手动触发）

去重与覆盖规则（同日期同维度）

导入结果报告（成功/失败/耗时/错误摘要）

数据完成表（今日/本周缺失数据）

5.3 指标库与搜索

指标目录树（分类+搜索）

指标详情页（口径、来源、单位、频率、更新时间）

常用指标收藏/置顶（可选）

5.4 图表分析（两类通用图型）
5.4.1 季节性叠线图（主）

单指标、多年份、一年一条线

x轴模式（周序号/日历日）

分位带/历史区间（可选）

同比/分位数摘要（可选）

5.4.2 区间多指标图（辅）

时间范围选择

1~2指标（默认），支持双轴

同比/环比/移动均线（可选）

导出数据（明细/宽表）

5.5 异常识别与 TopN 榜单

价格涨跌 TopN（省/企业/库点）

价差扩大/收窄 TopN

利润转负/转正名单

与季节性偏离度排行（分位数）

告警规则配置（阈值/分位/连续天数）（可选）

5.6 多来源一致性与偏离（可信度引擎）

同指标多来源对比图

拟合度/偏离度指标（如相关系数、偏差均值、漂移检测）

偏离告警（口径变更/样本变动提示）

锚定口径选择与说明

5.7 供需模型与可解释输出（可选/二期）

供需平衡表（输入/输出字段定义）

供需曲线模型输出（价格区间）

证据链面板（关键观测指标自动挂接）

Nowcast（周→月前瞻桥接）

5.8 周报/策略报告工厂（核心交付）

报告模板库（周报/月报）

一键生成报告实例（自动拉图+摘要）

人工填写区（观点、风险点、建议）

导出：PPTX/PDF/Excel

报告版本管理（归档、对比、锁定）

5.9 套保建议与复盘台账（可选/二期）

建议记录（方向、比例、期限、触发条件、依据）

执行记录（实际执行、成本、对冲效果）

复盘（盈亏、偏差原因、改进）

策略库沉淀与检索

6. 页面与交互（IA/原型目录）

6.1 信息架构（导航/菜单）

6.2 页面清单

登录页

首页看板（完成率+TopN+告警）

指标库页（树+搜索）

图表分析页（季节性通用/区间通用）

多来源一致性页

数据导入页（批次记录）

报告中心（模板/实例/导出）

用户与权限（管理员）

6.3 关键交互说明（筛选器、年份多选、双轴切换、导出）

7. 接口与数据契约（API 目录）

7.1 认证相关 API

7.2 元数据 API（指标/维度/模板）

7.3 查询 API

seasonality（季节性）

timeseries_multi（区间多指标）

topn / anomaly（榜单与异常）

source_compare（一致性对比）

7.4 导入与任务 API

7.5 报告生成与导出 API

7.6 响应结构规范（统一 meta、unit、freq、null处理）

8. 权限矩阵与审计

8.1 角色-功能权限矩阵表

8.2 数据级权限（是否需要按部门/团队隔离）

8.3 操作审计（导入、删除、导出、模板修改）

9. 非功能需求

9.1 性能（导入速度、查询响应、并发）

9.2 数据准确性与一致性（去重、覆盖、版本）

9.3 可用性（容错、重试、任务队列）

9.4 安全（JWT、密码策略、SQL注入、文件上传）

9.5 可维护性（日志、监控、告警）

9.6 部署（Docker/单机/内网、备份策略）

10. 验收标准（建议按模块列 Test Case）

10.1 数据导入验收（重复导入不增量、错误可追溯）

10.2 季节性图验收（多年叠线、x轴对齐、缺失断线）

10.3 区间双轴验收（单位不同自动双轴）

10.4 TopN/异常验收（规则正确、可解释）

10.5 报告生成验收（模板一致、导出可用）

10.6 权限验收（不同角色访问控制）

11. 风险与依赖

数据源授权/稳定性

指标口径变动与维护成本

导出 PPTX 的格式一致性

模型模块的解释与信任问题

12. 附录

指标分类与示例清单

周报模板栏目映射（PPT→系统模板）

字段字典（DB 字段/枚举）

术语与口径说明补充