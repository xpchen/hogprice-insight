# 表结构定义文档

## 说明

本文档基于对5类Excel文件的详细分析，定义每个sheet对应的表结构和列映射规则。

**重要提示**：本文档是分析阶段的输出，用于指导后续的表结构创建和列映射实现。

## 分析结果汇总

### 1. 钢联价格模板 (GANGLIAN DAILY)
- **文件**: `1、价格：钢联自动更新模板.xlsx`
- **Sheet数量**: 7个
- **结构类型**: 主要是WIDE_DATE_COLS（日期作为列）

### 2. 涌益周度数据 (YONGYI WEEKLY)
- **文件**: `2026.1.16-2026.1.22涌益咨询 周度数据.xlsx`
- **Sheet数量**: 65个
- **结构类型**: 混合（WIDE_DATE_COLS, NARROW_DATE_ROWS, UNKNOWN）

### 3. 涌益日度数据 (YONGYI DAILY)
- **文件**: `2026年2月2日涌益咨询日度数据 - 副本.xlsx`
- **Sheet数量**: 8个
- **结构类型**: 主要是WIDE_DATE_COLS

### 4. DCE期货 (DCE DAILY)
- **文件**: `lh_ftr.xlsx`
- **状态**: 待分析

### 5. DCE期权 (DCE DAILY)
- **文件**: `lh_opt.xlsx`
- **状态**: 待分析

## 下一步工作

1. **详细分析每个sheet的结构**
   - 识别表头行
   - 识别日期列/周期列
   - 识别指标列
   - 识别维度列（省份、城市、企业等）

2. **定义表结构**
   - 基础字段（id, batch_id, trade_date/period_start/period_end等）
   - Sheet特定字段
   - 唯一键
   - 索引

3. **定义列映射规则**
   - 从Excel列到表字段的映射
   - 数据转换规则
   - 值映射规则

4. **生成完整的表结构定义**
   - SQL DDL语句
   - Alembic迁移脚本
   - 列映射配置JSON

## 分析进度

- [x] 钢联价格模板 - 7个sheet已识别结构类型
- [x] 涌益周度数据 - 10个sheet已分析（共65个）
- [x] 涌益日度数据 - 8个sheet已分析
- [ ] DCE期货 - 待分析
- [ ] DCE期权 - 待分析

## 注意事项

1. **表名长度限制**: MySQL表名最长64字符，需要处理超长sheet名称
2. **一个sheet可能包含多张表**: 需要仔细分析sheet结构，识别是否包含多个逻辑表
3. **列映射复杂性**: 不同sheet的结构差异很大，需要针对性的映射规则
